<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</title>
    <meta name="csrf-token" content="{{ csrf_token }}">
    {% load static %}
    <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
    <script src="{% static 'main/js/script.js' %}"></script>

</head>
<body>
  <header class="page-header">
  <h1 class="title">–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h1>
    <div class="buttons-group">
      {% if user.is_authenticated %}
        <button class="add-task-btn" id="addTaskBtn">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</button>
        <button class="add-task-btn" id="logoutBtn">–í—ã—Ö–æ–¥</button>
      {% else %}
        <button class="add-task-btn" id="authBtn">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</button>
      {% endif %}
  </div>
</header>
  <div class="main">
      {% for task in tasks %}
        <div class="task">
          <div class="task-header editTaskBtn" data-id="{{ task.id }}" data-color="{{ task.color }}" style="background-color: {{ task.color }};">{{ task.name }}</div>
          <div class="task-content">
            <p class="task-description">–û–ø–∏—Å–∞–Ω–∏–µ: {{ task.description }}</p>
              <p class="task-deadline" data-end="{{ task.end_date|date:'Y-m-d\\TH:i' }}"><b>–°—Ä–æ–∫: {{ task.end_date|date:"G:i d.m.Y" }}</b></p>
            <p class="task-date-create">–°–æ–∑–¥–∞–Ω–æ: {{ task.start_date|date:"d.m.Y" }}</p>
          </div>
          <div class="{% if task.status == '–í –ø—Ä–æ—Ü–µ—Å—Å–µ' %} task-footer-process {% else %} task-footer {% endif %}" >
            <p>{{ task.status }}</p>
          </div>
        </div>
      {% endfor %}
  </div>

  <div class="modal-overlay" id="modalOverlay">
      <div class="task">
        <div class="task-header"><input name="name" class="form-control" type="text" id="taskHeader" value="–ò–º—è –∑–∞–º–µ—Ç–∫–∏">
          <a class="close-task" id="closeTaskBtn">X</a>
        </div>
        <div class="task-content">
            <p class="task-color"><b>–¶–≤–µ—Ç</b>:</p>
            <input name="color" class="form-control" type="color" value="#2154e2">
          <p class="task-description">–û–ø–∏—Å–∞–Ω–∏–µ:</p> <textarea name="description" class="form-control">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</textarea>
          <p class="task-deadline"><b>–°—Ä–æ–∫</b>:</p><input name="end_date" class="form-control" type="datetime-local" value="">
            <input type="hidden" name="task_id" value="">
        </div>
        <div class="modal-task-footer">
          <a class="delete-task">üóëÔ∏è</a>
          <select class="form-control" name="status">
            <option value="–í –ø—Ä–æ—Ü–µ—Å—Å–µ">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
            <option value="–í—ã–ø–æ–ª–Ω–µ–Ω–æ">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
          </select>
          <a class="save-task">üíæ</a>
        </div>
      </div>
  </div>

<div class="modal-auth" id="modalAuth">
  <div class="modal-auth-content">
    <a class="close-auth" id="closeAuthBtn">X</a>
      <h2 class="title-auth">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
    <input type="text" name="username" class="form-control" id="id_login_username" placeholder="–õ–æ–≥–∏–Ω" required>
    <input type="password" name="password" class="form-control" id="id_login_password" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <button name="submit" value="–í—Ö–æ–¥" class="login-btn" id="loginBtn">–í—Ö–æ–¥</button>
      <a class="reg-btn" id="regBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
  </div>
</div>

<div class="modal-reg" id="modalReg">
  <div class="modal-reg-content">
    <a class="close-reg" id="closeRegBtn">X</a>
      <h2 class="title-reg">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</h2>
      <input type="text" name="username" class="form-control" id="id_reg_username" placeholder="–õ–æ–≥–∏–Ω" required>
      <input type="password" name="password" class="form-control" id="id_reg_password" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <input type="password" name="password" class="form-control" id="id_second_reg_password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
      <div id="reg-error" style="color: red; display: none; margin: 5px;"></div>
      <button name="submit" value="–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" class="register-btn" id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
  </div>
</div>

</body>
</html>
